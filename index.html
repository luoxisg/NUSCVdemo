 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NUS Tropical DC Zero-touch 2.0</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (Stable) -->
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Prop-types -->
    <script src="https://unpkg.com/prop-types/prop-types.min.js"></script>

    <!-- Recharts (Stable) -->
    <script src="https://unpkg.com/recharts@2.12.7/umd/Recharts.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { font-family: 'Inter', system-ui, -apple-system, sans-serif; -webkit-tap-highlight-color: transparent; }
        .animate-spin-slow { animation: spin 8s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        /* Hide scrollbar */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-[#F5F6F8] text-gray-800 h-screen overflow-hidden">
    <div id="root" class="h-full"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        const { 
            LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip: RechartsTooltip, 
            ResponsiveContainer, AreaChart, Area, BarChart, Bar, ScatterChart, Scatter, 
            ZAxis, Legend, ReferenceLine 
        } = window.Recharts;

        // --- Icon Helper ---
        const Icon = ({ name, size = 18, className = "" }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (iconRef.current && window.lucide && window.lucide.createIcons) {
                    const iTag = document.createElement('i');
                    iTag.setAttribute('data-lucide', name);
                    iconRef.current.innerHTML = '';
                    iconRef.current.appendChild(iTag);
                    window.lucide.createIcons({
                        root: iconRef.current,
                        nameAttr: 'data-lucide',
                        attrs: { width: size, height: size, class: className }
                    });
                }
            }, [name, size, className]);
            return <span ref={iconRef} className="flex items-center justify-center"></span>;
        };

        const getTimeLabel = (offsetSeconds = 0) => {
            const d = new Date();
            d.setSeconds(d.getSeconds() - offsetSeconds);
            return d.toLocaleTimeString('en-GB', { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' });
        };

        // --- 1. Coating Monitor View (Rich) ---
        const CoatingView = () => {
            // Mock defect data
            const defectData = useMemo(() => Array.from({length: 15}, () => ({
                x: Math.floor(Math.random() * 100),
                y: Math.floor(Math.random() * 100),
                z: Math.floor(Math.random() * 100), // severity
            })), []);

            const healthTrend = [
                { month: 'Jan', health: 98 }, { month: 'Feb', health: 97.5 }, { month: 'Mar', health: 97.2 },
                { month: 'Apr', health: 96.8 }, { month: 'May', health: 96.5 }, { month: 'Jun', health: 96.1 },
            ];

            return (
                <div className="space-y-4 animate-in fade-in duration-500 pb-20">
                    {/* Surface Defect Map */}
                    <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                        <h3 className="text-sm font-bold text-[#003D7C] mb-4 flex items-center gap-2">
                            <Icon name="Layers" className="text-[#EF7C00]" size={16}/> Surface Defect Map (Unit A-04)
                        </h3>
                        <div className="h-56 w-full">
                            <ResponsiveContainer width="100%" height="100%">
                                <ScatterChart margin={{ top: 10, right: 10, bottom: 10, left: -10 }}>
                                    <CartesianGrid strokeDasharray="3 3" />
                                    <XAxis type="number" dataKey="x" name="Pos X" unit="cm" stroke="#9ca3af" tick={{fontSize:9}} />
                                    <YAxis type="number" dataKey="y" name="Pos Y" unit="cm" stroke="#9ca3af" tick={{fontSize:9}} />
                                    <ZAxis type="number" dataKey="z" range={[30, 200]} name="Severity" />
                                    <RechartsTooltip cursor={{ strokeDasharray: '3 3' }} contentStyle={{borderRadius: '8px', fontSize: '10px'}} />
                                    <Scatter name="Defects" data={defectData} fill="#EF7C00" />
                                </ScatterChart>
                            </ResponsiveContainer>
                        </div>
                        <div className="text-center text-[10px] text-gray-500 mt-2">
                            Detected Micro-cracks Distribution (Scanner Feed)
                        </div>
                    </div>

                    {/* Health & Metrics */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                         <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                             <h3 className="text-sm font-bold text-[#003D7C] mb-2">Health Prediction</h3>
                             <div className="h-40 w-full">
                                <ResponsiveContainer width="100%" height="100%">
                                    <LineChart data={healthTrend}>
                                        <CartesianGrid strokeDasharray="3 3" vertical={false} />
                                        <XAxis dataKey="month" tick={{fontSize: 9}} stroke="#9ca3af" />
                                        <YAxis domain={[95, 100]} tick={{fontSize: 9}} stroke="#9ca3af" width={25} />
                                        <RechartsTooltip contentStyle={{borderRadius: '8px', fontSize: '10px'}} />
                                        <Line type="monotone" dataKey="health" stroke="#003D7C" strokeWidth={2} dot={{r:2}} />
                                    </LineChart>
                                </ResponsiveContainer>
                             </div>
                         </div>
                         <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200 flex flex-col justify-center items-center">
                             <div className="relative w-24 h-24 flex items-center justify-center">
                                 <svg className="w-full h-full transform -rotate-90">
                                     <circle cx="48" cy="48" r="40" stroke="#f3f4f6" strokeWidth="8" fill="none" />
                                     <circle cx="48" cy="48" r="40" stroke="#003D7C" strokeWidth="8" fill="none" strokeDasharray="251" strokeDashoffset="10" />
                                 </svg>
                                 <div className="absolute text-center">
                                     <span className="text-xl font-bold text-[#003D7C]">96%</span>
                                 </div>
                             </div>
                             <p className="text-xs font-bold text-gray-600 mt-2">Surface Integrity</p>
                             <p className="text-[10px] text-green-600">Next Maint: 142 Days</p>
                         </div>
                    </div>
                </div>
            );
        };

        // --- 2. Visual SLAM View (Rich) ---
        const SlamView = () => {
            const [robotPos, setRobotPos] = useState({ x: 20, y: 20 });
            
            // Map points
            const mapPoints = useMemo(() => {
                const pts = [];
                for(let i=0; i<100; i+=5) pts.push({x: i, y: 0}, {x: i, y: 100}, {x: 0, y: i}, {x: 100, y: i}); 
                for(let i=30; i<70; i+=10) pts.push({x: i, y: 40}, {x: i, y: 60}); 
                return pts;
            }, []);

            useEffect(() => {
                const interval = setInterval(() => {
                    setRobotPos(prev => ({
                        x: (prev.x + 2) % 90 + 5,
                        y: 40 + Math.sin(prev.x / 10) * 20
                    }));
                }, 500);
                return () => clearInterval(interval);
            }, []);

            return (
                <div className="space-y-4 animate-in fade-in duration-500 pb-20">
                    <div className="bg-gray-900 p-4 rounded-lg shadow-sm border border-gray-800">
                        <div className="flex justify-between items-center mb-2">
                             <h3 className="text-sm font-bold text-green-400 flex items-center gap-2"><Icon name="Box" size={16}/> Live LIDAR Map</h3>
                             <span className="text-[10px] text-gray-500 animate-pulse">● TRACKING</span>
                        </div>
                        <div className="h-56 w-full bg-black/50 rounded border border-gray-700 relative overflow-hidden">
                             {/* Map Points */}
                             {mapPoints.map((pt, i) => (
                                 <div key={i} className="absolute w-1 h-1 bg-green-500/50 rounded-full" style={{left: `${pt.x}%`, top: `${pt.y}%`}} />
                             ))}
                             {/* Robot */}
                             <div 
                                className="absolute w-3 h-3 bg-blue-500 border border-white rounded-full transition-all duration-500 ease-linear shadow-[0_0_10px_rgba(59,130,246,0.8)]"
                                style={{left: `${robotPos.x}%`, top: `${robotPos.y}%`}}
                             />
                             {/* Scanner Effect */}
                             <div className="absolute w-20 h-20 border border-green-500/20 rounded-full transition-all duration-500 ease-linear flex items-center justify-center"
                                  style={{left: `calc(${robotPos.x}% - 40px)`, top: `calc(${robotPos.y}% - 40px)`}}>
                                  <div className="w-full h-[1px] bg-green-500/30 animate-spin-slow"></div>
                             </div>
                        </div>
                        <div className="flex justify-between mt-2 font-mono text-[10px] text-green-300">
                             <span>X: {robotPos.x.toFixed(1)} m</span>
                             <span>Y: {robotPos.y.toFixed(1)} m</span>
                             <span>Conf: 99.8%</span>
                        </div>
                    </div>
                    
                    <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                         <div className="flex items-center gap-3 mb-2">
                            <div className="p-2 bg-blue-50 rounded-full"><Icon name="Map" size={16} className="text-[#003D7C]"/></div>
                            <div>
                                <h3 className="text-sm font-bold text-[#003D7C]">Geometry Check</h3>
                                <p className="text-[10px] text-gray-500">Comparing Scan vs CAD</p>
                            </div>
                         </div>
                         <div className="space-y-2">
                             <div className="flex justify-between text-xs">
                                 <span>Drift Error</span>
                                 <span className="font-bold">0.02 cm</span>
                             </div>
                             <div className="w-full bg-gray-100 rounded-full h-1.5">
                                 <div className="bg-green-500 h-1.5 rounded-full" style={{width: '5%'}}></div>
                             </div>
                             <div className="flex justify-between text-xs mt-1">
                                 <span>Obstacles</span>
                                 <span className="font-bold text-orange-500">1 Detected</span>
                             </div>
                         </div>
                    </div>
                </div>
            );
        };

        // --- 3. CFD Engine View (Rich) ---
        const CfdView = () => {
            const heatmapData = Array.from({length: 8}, (_, r) => 
                Array.from({length: 6}, (_, c) => ({
                    row: r, col: c, temp: 22 + Math.random() * 15 
                }))
            );

            return (
                <div className="space-y-4 animate-in fade-in duration-500 pb-20">
                    <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-sm font-bold text-[#003D7C] flex items-center gap-2">
                                <Icon name="Wind" className="text-[#EF7C00]" size={16}/> Thermal Map
                            </h3>
                            <div className="flex gap-2 text-[9px]">
                                <span className="flex items-center gap-1"><div className="w-2 h-2 bg-blue-200"></div> &lt;25°</span>
                                <span className="flex items-center gap-1"><div className="w-2 h-2 bg-red-400"></div> &gt;35°</span>
                            </div>
                        </div>
                        
                        {/* CSS Grid Heatmap */}
                        <div className="grid grid-cols-6 gap-1 h-40">
                            {heatmapData.flat().map((cell, i) => {
                                let bg = 'bg-blue-100';
                                if (cell.temp > 25) bg = 'bg-blue-300';
                                if (cell.temp > 30) bg = 'bg-orange-300';
                                if (cell.temp > 35) bg = 'bg-red-500';
                                return (
                                    <div key={i} className={`${bg} rounded flex items-center justify-center text-[8px] text-white/90 font-mono`}>
                                        {Math.floor(cell.temp)}
                                    </div>
                                )
                            })}
                        </div>
                        <p className="text-[10px] text-gray-500 mt-2 text-center">Rack A-Row Elevation (°C)</p>
                    </div>

                    <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                        <h3 className="text-sm font-bold text-[#003D7C] mb-2">Sim Parameters</h3>
                        <div className="grid grid-cols-2 gap-3 text-xs">
                             <div className="p-2 bg-gray-50 rounded border border-gray-100">
                                 <span className="block text-gray-500 text-[10px]">Inlet Vel</span>
                                 <span className="font-bold">2.4 m/s</span>
                             </div>
                             <div className="p-2 bg-gray-50 rounded border border-gray-100">
                                 <span className="block text-gray-500 text-[10px]">Pressure</span>
                                 <span className="font-bold">45 Pa</span>
                             </div>
                             <div className="p-2 bg-gray-50 rounded border border-gray-100">
                                 <span className="block text-gray-500 text-[10px]">Turbulence</span>
                                 <span className="font-bold">k-ε Model</span>
                             </div>
                             <div className="p-2 bg-blue-50 text-blue-700 rounded border border-blue-100 flex items-center justify-center font-bold">
                                 Running...
                             </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- 4. AI Control View (Rich) ---
        const AiView = () => {
            const pueData = [
                { time: 'T-60', baseline: 1.4, optimized: 1.18 },
                { time: 'T-45', baseline: 1.42, optimized: 1.17 },
                { time: 'T-30', baseline: 1.39, optimized: 1.15 },
                { time: 'T-15', baseline: 1.45, optimized: 1.16 },
                { time: 'Now', baseline: 1.41, optimized: 1.14 },
            ];

            return (
                <div className="space-y-4 animate-in fade-in duration-500 pb-20">
                    <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                        <h3 className="text-sm font-bold text-[#003D7C] mb-2 flex items-center gap-2">
                            <Icon name="Cpu" className="text-[#EF7C00]" size={16}/> AI Optimization Impact
                        </h3>
                        <div className="h-48 w-full">
                            <ResponsiveContainer width="100%" height="100%">
                                <AreaChart data={pueData}>
                                    <defs>
                                        <linearGradient id="colorBase" x1="0" y1="0" x2="0" y2="1">
                                            <stop offset="5%" stopColor="#9ca3af" stopOpacity={0.1}/>
                                            <stop offset="95%" stopColor="#9ca3af" stopOpacity={0}/>
                                        </linearGradient>
                                        <linearGradient id="colorOpt" x1="0" y1="0" x2="0" y2="1">
                                            <stop offset="5%" stopColor="#003D7C" stopOpacity={0.3}/>
                                            <stop offset="95%" stopColor="#003D7C" stopOpacity={0}/>
                                        </linearGradient>
                                    </defs>
                                    <CartesianGrid strokeDasharray="3 3" vertical={false} />
                                    <XAxis dataKey="time" tick={{fontSize: 9}} stroke="#9ca3af" />
                                    <YAxis domain={[1, 1.6]} tick={{fontSize: 9}} stroke="#9ca3af" width={25} />
                                    <RechartsTooltip contentStyle={{borderRadius: '8px', fontSize: '10px'}} />
                                    <Legend wrapperStyle={{fontSize: '10px'}} />
                                    <Area type="monotone" dataKey="baseline" name="Baseline" stroke="#9ca3af" fill="url(#colorBase)" strokeDasharray="3 3" />
                                    <Area type="monotone" dataKey="optimized" name="AI Control" stroke="#003D7C" fill="url(#colorOpt)" strokeWidth={2} />
                                </AreaChart>
                            </ResponsiveContainer>
                        </div>
                        <div className="flex items-center justify-between bg-green-50 p-2 rounded mt-2 border border-green-100">
                            <span className="text-xs text-gray-600">Total Energy Savings</span>
                            <span className="text-sm font-bold text-green-700">-18.4%</span>
                        </div>
                    </div>

                    <div className="bg-black text-gray-200 p-4 rounded-lg shadow-lg font-mono text-[10px] h-48 overflow-y-auto">
                        <div className="mb-2 text-[#EF7C00] sticky top-0 bg-black">root@stdczt-core:~# tail -f decision_log</div>
                        <div className="space-y-1">
                            <p><span className="text-gray-500">[{getTimeLabel(5)}]</span> <span className="text-purple-400">[MODEL]</span> Pred: Hotspot 85%.</p>
                            <p><span className="text-gray-500">[{getTimeLabel(2)}]</span> <span className="text-green-400">[ACT]</span> Fan PWM -> 65%.</p>
                            <p><span className="text-gray-500">[{getTimeLabel(1)}]</span> <span className="text-green-400">[ACT]</span> Valve V-04 -> 80%.</p>
                            <p><span className="text-gray-500">[{getTimeLabel(0)}]</span> <span className="text-blue-400">[INFO]</span> New PUE: 1.14</p>
                            <p className="animate-pulse">_</p>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Other Views (Liquid Cooling & Energy - Preserved) ---
        const CoolingView = () => (
            <div className="space-y-4 animate-in fade-in duration-500">
                <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                    <h3 className="text-md font-bold text-[#003D7C] mb-3 flex items-center gap-2">
                        <Icon name="Droplets" className="text-[#EF7C00]" /> Rack Thermal Status
                    </h3>
                    <div className="overflow-x-auto">
                        <table className="w-full text-xs text-left whitespace-nowrap">
                            <thead className="bg-gray-50 text-gray-500 uppercase text-[10px]">
                                <tr>
                                    <th className="px-3 py-2">Rack</th>
                                    <th className="px-3 py-2">Inlet</th>
                                    <th className="px-3 py-2">Outlet</th>
                                    <th className="px-3 py-2">Status</th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-gray-100">
                                {[1, 2, 3, 4, 5].map(id => (
                                    <tr key={id} className="hover:bg-gray-50">
                                        <td className="px-3 py-2 font-medium">A0{id}</td>
                                        <td className="px-3 py-2 text-blue-600">24.{Math.floor(Math.random()*9)}°</td>
                                        <td className="px-3 py-2 text-orange-600">38.{Math.floor(Math.random()*9)}°</td>
                                        <td className="px-3 py-2"><span className="px-1.5 py-0.5 bg-green-100 text-green-700 rounded text-[10px]">OK</span></td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        );

        const EnergyView = ({ sstData, flywheelData, gridData }) => (
            <div className="space-y-4 animate-in fade-in duration-500 pb-20">
                <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                    <div className="flex justify-between items-center mb-2">
                        <h3 className="text-sm font-bold text-[#003D7C] flex items-center gap-2"><Icon name="Zap" size={16} className="text-[#EF7C00]"/> SST Phase</h3>
                        <span className="bg-green-100 text-green-700 px-2 py-0.5 rounded text-[10px] font-bold">GRID-FORMING</span>
                    </div>
                    <div className="grid grid-cols-3 gap-2 mb-2 text-center">
                        {['A', 'B', 'C'].map(p => (
                            <div key={p} className="bg-gray-50 rounded p-1 border border-gray-100">
                                <div className="text-[9px] text-gray-400 font-bold">{p}</div>
                                <div className="text-xs font-bold text-[#003D7C]">230V</div>
                            </div>
                        ))}
                    </div>
                </div>
                <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                    <h3 className="text-sm font-bold text-[#003D7C] mb-2 flex items-center gap-2"><Icon name="Disc" size={16} className="text-[#EF7C00]"/> Flywheel Power</h3>
                    <div className="h-40 w-full">
                        <ResponsiveContainer width="100%" height="100%">
                            <AreaChart data={flywheelData}>
                                <defs>
                                    <linearGradient id="colorPower" x1="0" y1="0" x2="0" y2="1">
                                        <stop offset="5%" stopColor="#EF7C00" stopOpacity={0.3}/>
                                        <stop offset="95%" stopColor="#EF7C00" stopOpacity={0}/>
                                    </linearGradient>
                                </defs>
                                <CartesianGrid strokeDasharray="3 3" vertical={false} />
                                <XAxis dataKey="time" tick={{fontSize: 9}} stroke="#9ca3af" />
                                <YAxis tick={{fontSize: 9}} stroke="#9ca3af" width={25} />
                                <Area type="monotone" dataKey="power" stroke="#EF7C00" fill="url(#colorPower)" strokeWidth={2} />
                            </AreaChart>
                        </ResponsiveContainer>
                    </div>
                </div>
            </div>
        );

        // --- Main App ---
        function App() {
            const [activeTab, setActiveTab] = useState('overview');
            const [isSidebarOpen, setSidebarOpen] = useState(false);
            const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);
            
            // Shared Data
            const [coolingData, setCoolingData] = useState([]);
            const [sstData, setSstData] = useState([]);      
            const [flywheelData, setFlywheelData] = useState([]); 
            const [gridData, setGridData] = useState([]);    
            const [currentTime, setCurrentTime] = useState(new Date());

            useEffect(() => {
                const handleResize = () => setIsMobile(window.innerWidth <= 768);
                window.addEventListener('resize', handleResize);
                
                // Init data
                const initData = Array.from({length:15}, (_, i) => ({
                    time: getTimeLabel(15-i), 
                    voidFraction: Math.random(), 
                    burnoutProb: Math.random(), 
                    limit: 0.8,
                    thd: 1.5+Math.random(),
                    power: (Math.random()*20 - 5),
                    freq: 49.95 + Math.random()*0.1
                }));
                setCoolingData(initData); setSstData(initData); setFlywheelData(initData); setGridData(initData);

                const interval = setInterval(() => {
                    const t = getTimeLabel(0);
                    const newData = {
                        time: t,
                        voidFraction: 0.3 + Math.random() * 0.25,
                        burnoutProb: Math.random() * 0.2,
                        limit: 0.8,
                        thd: 1.5 + Math.random() * 0.8,
                        power: Math.random()*20 - 5,
                        freq: 49.95 + Math.random()*0.1
                    };
                    
                    setCoolingData(prev => [...prev.slice(1), newData]);
                    setSstData(prev => [...prev.slice(1), newData]);
                    setFlywheelData(prev => [...prev.slice(1), {time:t, power: prev[prev.length-1].power * 0.9 + (Math.random()*4 - 2)}]);
                    setGridData(prev => [...prev.slice(1), newData]);
                    setCurrentTime(new Date());
                }, 1000);
                
                return () => { window.removeEventListener('resize', handleResize); clearInterval(interval); };
            }, []);

            const SidebarItem = ({ id, icon, label, alert }) => (
                <button onClick={() => { setActiveTab(id); if(isMobile) setSidebarOpen(false); }}
                    className={`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors border-r-4
                        ${activeTab === id ? `bg-blue-50 text-[#003D7C] border-[#EF7C00]` : 'text-gray-500 border-transparent hover:bg-gray-50'}
                    `}>
                    <Icon name={icon} size={18} /><span>{label}</span>
                    {alert && <div className="ml-auto w-2 h-2 bg-[#EF7C00] rounded-full animate-pulse" />}
                </button>
            );

            const OverviewDashboard = () => (
                <div className="space-y-4 animate-in fade-in duration-500 pb-20">
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                         <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                             <div className="text-[10px] text-gray-500 font-bold">PUE</div>
                             <div className="text-xl font-bold text-[#003D7C]">1.18</div>
                         </div>
                         <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                             <div className="text-[10px] text-gray-500 font-bold">Load</div>
                             <div className="text-xl font-bold text-[#003D7C]">48 kW</div>
                         </div>
                    </div>
                    <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                         <div className="flex justify-between items-center mb-2">
                             <h2 className="text-sm font-bold text-[#003D7C] flex items-center gap-2">
                                 <Icon name="Droplets" className="text-[#EF7C00]" size={16}/> Liquid Cooling
                             </h2>
                             <span className="bg-green-100 text-green-700 px-2 py-0.5 rounded text-[10px] font-bold">ACTIVE</span>
                         </div>
                         <div className="h-48 w-full">
                            <ResponsiveContainer width="100%" height="100%">
                                <AreaChart data={coolingData}>
                                    <defs>
                                        <linearGradient id="colorVoid" x1="0" y1="0" x2="0" y2="1">
                                            <stop offset="5%" stopColor="#003D7C" stopOpacity={0.1}/>
                                            <stop offset="95%" stopColor="#003D7C" stopOpacity={0}/>
                                        </linearGradient>
                                    </defs>
                                    <CartesianGrid strokeDasharray="3 3" vertical={false} />
                                    <XAxis dataKey="time" tick={{fontSize: 9}} stroke="#9ca3af" />
                                    <YAxis tick={{fontSize: 9}} stroke="#9ca3af" width={25} />
                                    <Area type="monotone" dataKey="voidFraction" stroke="#003D7C" fill="url(#colorVoid)" strokeWidth={2} />
                                    <Line type="monotone" dataKey="limit" stroke="#FF0000" strokeDasharray="5 5" dot={false} />
                                </AreaChart>
                            </ResponsiveContainer>
                         </div>
                    </div>
                </div>
            );

            return (
                <div className="flex h-screen bg-[#F5F6F8] font-sans text-gray-800">
                    {/* Mobile Backdrop */}
                    {isMobile && isSidebarOpen && <div className="fixed inset-0 bg-black/50 z-40" onClick={() => setSidebarOpen(false)} />}
                    
                    {/* Sidebar */}
                    <aside className={`fixed md:static inset-y-0 left-0 z-50 bg-white border-r border-gray-200 flex flex-col transition-transform duration-300 ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'} w-64 md:w-20 md:hover:w-64 h-full shadow-lg md:shadow-none group`}>
                        <div className="h-14 flex items-center justify-center border-b border-gray-100 px-4">
                            <div className="flex items-center gap-2 text-[#003D7C]">
                                <div className="w-8 h-8 min-w-[2rem] bg-[#EF7C00] rounded flex items-center justify-center text-white font-bold text-lg">N</div>
                                <span className="font-bold text-xl md:hidden md:group-hover:block whitespace-nowrap">STDCZt 2.0</span>
                            </div>
                        </div>
                        <nav className="flex-1 py-4 space-y-1 overflow-y-auto">
                            <SidebarItem id="overview" icon="Activity" label="System Overview" />
                            <SidebarItem id="cooling" icon="Droplets" label="Liquid Cooling" alert={true} />
                            <SidebarItem id="coating" icon="Layers" label="Coating Monitor" />
                            <SidebarItem id="slam" icon="Box" label="Visual SLAM" />
                            <div className="my-2 border-t border-gray-100"></div>
                            <SidebarItem id="energy" icon="Zap" label="Energy (HHE)" />
                            <SidebarItem id="cfd" icon="Wind" label="CFD Engine" />
                            <SidebarItem id="ai" icon="Cpu" label="AI Control" />
                        </nav>
                        <div className="p-4 border-t border-gray-100">
                             <div className="flex items-center gap-3 w-full">
                                <div className="w-8 h-8 min-w-[2rem] bg-gray-200 rounded-full flex items-center justify-center font-bold text-xs text-gray-600">DC</div>
                                <div className="text-left overflow-hidden whitespace-nowrap md:hidden md:group-hover:block">
                                    <div className="text-xs font-bold text-gray-700 truncate">Admin</div>
                                </div>
                            </div>
                        </div>
                    </aside>

                    {/* Main Content */}
                    <div className="flex-1 flex flex-col overflow-hidden w-full">
                        <header className="h-14 bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm z-30 shrink-0">
                            <div className="flex items-center gap-3">
                                <button onClick={() => setSidebarOpen(!isSidebarOpen)} className="p-2 -ml-2 hover:bg-gray-100 rounded text-gray-500"><Icon name="Menu" size={20} /></button>
                                <h1 className="text-sm font-bold text-[#003D7C] truncate">STDCZt 2.0</h1>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="bg-gray-100 px-2 py-1 rounded-full border border-gray-200 text-[10px] font-mono text-gray-600">
                                    {currentTime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                                </div>
                            </div>
                        </header>

                        <main className="flex-1 overflow-y-auto p-4 scroll-smooth">
                            <div className="max-w-7xl mx-auto">
                                {activeTab === 'overview' && <OverviewDashboard />}
                                {activeTab === 'cooling' && <CoolingView />}
                                {activeTab === 'coating' && <CoatingView />}
                                {activeTab === 'slam' && <SlamView />}
                                {activeTab === 'energy' && <EnergyView sstData={sstData} flywheelData={flywheelData} gridData={gridData} />}
                                {activeTab === 'cfd' && <CfdView />}
                                {activeTab === 'ai' && <AiView />}
                            </div>
                        </main>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
